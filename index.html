<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc" crossorigin="anonymous"></script>
    <title>Iniciar sesión</title>
    <link rel="stylesheet" href="/css/style2.css">
    <link rel="icon" href="/img/Icon.png" type="image/x-icon">
    <meta name="description" content="Encuentra las mejores habitaciones, pensiones y casas en tu ciudad favorita.">
    <meta name="keywords" content="Pension, Habitacion, Apartamento, Arriendos, Inmuebles, Bienes Inmuebles, Estadias, ViUniGo">

</head>
<body>
    <div class="login-container">
        <div class="signin-signup">
            <form action="frontend/index.html" class="sign-in-form">
                <h2>Iniciar sesión</h2>
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="username" name="username" placeholder="Usuario" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password"  placeholder="Contraseña">
                </div>
                <button type="submit">Iniciar sesión</button>
                <p class="social-text">O Inicia Sesion Desde tus Redes Sociales</p>
                <div class="social-media">
                    <a href="#" class="social-icon">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="#" class="social-icon">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="social-icon">
                        <i class="fab fa-google"></i>
                    </a>
                    <a href="#" class="social-icon">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
                <P class="account-text" >¿No tienes una cuenta? <a href="#" id="sign-in-btn2"> Registrate aqui</a> </P>
            </form>
            <form id="sign-up-form" class="sign-up-form">
                <h2>Registrarse</h2>
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="name" name="name" placeholder="Usuario" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="email" name="email" placeholder="Correo" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="password" name="password" placeholder="Contraseña" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-phone"></i>
                    <input type="text" id="phone" name="phone" placeholder="Telefono" required>
                </div>
                <button type="submit">Registrarse</button>
                <p class="social-text">O Inicia Sesion Desde tus Redes Sociales</p>
                <div class="social-media">
                    <a href="#" class="social-icon">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="#" class="social-icon">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="social-icon">
                        <i class="fab fa-google"></i>
                    </a>
                    <a href="#" class="social-icon">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
                <p class="account-text">¿Ya tienes una cuenta? <a href="#" id="sign-up-btn2"> Inicia Sesion aqui</a> </p>
            </form>
            
            <script>
                const API_URL = '193.203.175.73'; // Cambia esto por la URL de tu servidor
            
                // Manejar el evento "submit" del formulario de registro
                document.getElementById('sign-up-form').addEventListener('submit', async (event) => {
                    event.preventDefault(); // Evitar que el formulario recargue la página
            
                    // Obtener los datos del formulario
                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    const phone = document.getElementById('phone').value;
            
                    try {
                        // Enviar los datos al servidor mediante fetch
                        const response = await fetch("193.203.175.73", {
                            method: 'POST', // Método HTTP para crear un usuario
                            headers: {
                                'Content-Type': 'application/json', // Indicar que los datos se envían como JSON
                            },
                            body: JSON.stringify({ name, email, password,phone }), // Convertir los datos a JSON
                        });
            
                        if (response.ok) {
                            // Si la respuesta es exitosa
                            const data = await response.json();
                            alert('Usuario registrado exitosamente: ' + data.message); // Notificar al usuario
                            document.getElementById('sign-up-form').reset(); // Limpiar el formulario
                        } else {
                            // Si hay un error, manejar la respuesta
                            const errorData = await response.json();
                            alert('Error al registrar usuario: ' + errorData.message);
                        }
                    } catch (error) {
                        // Manejar errores de red o conexión
                        console.error('Error al conectar con el servidor:', error);
                        alert('Hubo un problema al registrar el usuario. Inténtalo de nuevo.');
                    }
                });
            </script>
            
        </div>
        <div class="panels-container">
            <div class="panel left-panel">
                <div class="content">
                    <h3>Member of Brand?</h3>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis autem in, numquam blanditiis aliquid quod soluta vero quo perferendis laboriosam totam tenetur quos voluptas at sunt iste corporis optio. Unde.</p>
                    <button class="btn" id="sign-in-btn" >Sign in</button>
                </div>
                <img src="/img/ViUniGo_Icon.png" alt="" class="images">
            </div>
            <div class="panel right-panel">
                <div class="content">
                    <h3>New to Brand?</h3>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis autem in, numquam blanditiis aliquid quod soluta vero quo perferendis laboriosam totam tenetur quos voluptas at sunt iste corporis optio. Unde.</p>
                    <button class="btn" id="sign-up-btn">Sign up</button>
                </div>
                <img src="/img/ViUniGo_Icon.png" alt="" class="images">
            </div>
        </div>
    </div>
    <script src="/js/script.js"></script>
    <script>
    
        document.getElementById('sign-up-form').addEventListener('submit', async (event) => {
            event.preventDefault(); // Evita la recarga de la página
    
            // Obtener valores del formulario
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
    
            console.log('Datos a enviar:', { username, email, password }); // Log para verificar datos
    
            try {
                // Enviar datos al backend
                const response = await fetch("API_URL", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ username, email, password }),
                });
    
                if (response.ok) {
                    const data = await response.json();
                    console.log('Respuesta del servidor:', data); // Log de la respuesta
                    alert('Usuario registrado exitosamente: ' + data.message);
                    document.getElementById('sign-up-form').reset(); // Limpiar el formulario
                } else {
                    // Si el servidor responde con un error
                    const errorData = await response.json();
                    console.error('Error del servidor:', errorData);
                    alert('Error al registrar usuario: ' + errorData.message);
                }
            } catch (error) {
                // Si ocurre un error en la conexión
                console.error('Error en la conexión:', error);
                alert('Hubo un problema al conectar con el servidor. Revisa la consola para más detalles.');
            }
        });
    </script>
    
</body>
</html>
